<!--
قالب فروشگاهی شبیه www.mariasis.com
این یک نسخهٔ آمادهٔ قابل اجرا (استاتیک) است که:
- صفحهٔ لیست محصولات، جزئیات محصول در مودال
- سبد خرید با ذخیره در localStorage
- فرم تسویهٔ ساده (نمونه) — پرداخت واقعی نیاز به درگاه دارد

نحوه استفاده:
1) این کد را در فایل index.html ذخیره کنید.
2) فایل را در مرورگر باز کنید تا نسخهٔ اولیه سایت را ببینید.
3) برای انتشار سریع: آن را در یک مخزن گیت‌هاب قرار دهید و GitHub Pages را فعال کنید.

من بعداً می‌تونم همین پروژه را به Shopify/WooCommerce/React+Stripe تبدیل کنم، اما برای شروع این نسخه کافی و قابل توسعه است.
-->
<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mariasis-style Boutique — فروشگاه</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    .glass{background: rgba(255,255,255,0.06); backdrop-filter: blur(6px);} 
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- nav -->
  <header class="bg-white shadow-sm">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <a class="text-2xl font-bold">MARIASIS</a>
      <div class="flex items-center gap-4">
        <nav class="hidden md:flex gap-6">
          <a href="#shop" class="hover:underline">فروشگاه</a>
          <a href="#collection" class="hover:underline">کلکسیون</a>
          <a href="#about" class="hover:underline">درباره ما</a>
        </nav>
        <button id="cartBtn" class="p-2 rounded-lg relative">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 7h13" />
          </svg>
          <span id="cartCount" class="absolute -top-1 -left-1 bg-red-600 text-white rounded-full text-xs px-2">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- hero -->
  <section class="bg-cover bg-center" style="background-image:linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url('https://images.unsplash.com/photo-1520975916137-1c72f4d2f4d6?auto=format&fit=crop&w=1500&q=60')">
    <div class="max-w-6xl mx-auto px-6 py-20 text-center text-white">
      <h1 class="text-4xl md:text-6xl font-extrabold">کلکسیون بهاری — Mariasis</h1>
      <p class="mt-4 text-lg md:text-xl max-w-2xl mx-auto">طرح‌های دست‌ساز، پارچه‌های باکیفیت و دوخت استادانه. ارسال داخل ایران.</p>
      <div class="mt-6">
        <a href="#shop" class="inline-block px-6 py-3 rounded-full bg-white text-slate-900 font-semibold">خرید کنید</a>
      </div>
    </div>
  </section>

  <!-- shop grid -->
  <main id="shop" class="max-w-6xl mx-auto px-6 py-12">
    <div class="flex items-center justify-between">
      <h2 class="text-2xl font-bold">محصولات</h2>
      <div class="text-sm text-slate-500">نمایش ۱۲ محصول</div>
    </div>

    <div id="products" class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- محصولات توسط جاوااسکریپت اضافه می‌شود -->
    </div>
  </main>

  <!-- footer -->
  <footer class="bg-white border-t mt-12">
    <div class="max-w-6xl mx-auto px-6 py-8 text-slate-600 text-sm">© 2025 Mariasis — طراحی الهام‌گرفته از سایت نمونه</div>
  </footer>

  <!-- cart drawer -->
  <div id="cartDrawer" class="fixed inset-y-0 left-0 w-full md:w-96 bg-white shadow-xl transform translate-x-full transition-transform duration-300">
    <div class="p-6 h-full flex flex-col">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-bold">سبد خرید</h3>
        <button id="closeCart" class="text-slate-500">بستن</button>
      </div>
      <div id="cartItems" class="mt-4 flex-1 overflow-auto"></div>
      <div class="mt-4">
        <div class="flex justify-between items-center">
          <div class="text-slate-600">جمع</div>
          <div id="cartTotal" class="text-lg font-bold">0 تومان</div>
        </div>
        <div class="mt-4">
          <button id="checkoutBtn" class="w-full px-4 py-3 rounded-full bg-black text-white">تسویه حساب</button>
        </div>
      </div>
    </div>
  </div>

  <!-- product modal -->
  <div id="productModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-lg max-w-3xl w-full overflow-hidden">
      <div class="md:flex">
        <div class="md:w-1/2 p-4">
          <img id="modalImg" src="" alt="" class="w-full h-80 object-cover rounded">
        </div>
        <div class="md:w-1/2 p-6">
          <h3 id="modalTitle" class="text-2xl font-bold"></h3>
          <div id="modalPrice" class="mt-2 text-xl text-rose-600 font-semibold"></div>
          <p id="modalDesc" class="mt-4 text-slate-600"></p>
          <div class="mt-6 flex items-center gap-3">
            <label>تعداد</label>
            <input id="modalQty" type="number" min="1" value="1" class="w-20 p-2 rounded border" />
          </div>
          <div class="mt-6 flex gap-3">
            <button id="addToCartBtn" class="px-4 py-3 rounded-full bg-rose-600 text-white">افزودن به سبد</button>
            <button id="closeModal" class="px-4 py-3 rounded-full border">انصراف</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- checkout mockup modal -->
  <div id="checkoutModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center p-4">
    <div class="bg-white rounded-lg max-w-2xl w-full p-6">
      <h3 class="text-xl font-bold">تسویه حساب</h3>
      <form id="checkoutForm" class="mt-4 grid gap-3">
        <input required placeholder="نام کامل" class="p-3 rounded border" />
        <input required placeholder="ایمیل" type="email" class="p-3 rounded border" />
        <input required placeholder="آدرس" class="p-3 rounded border" />
        <div class="flex gap-2">
          <input required placeholder="کد پستی" class="p-3 rounded border flex-1" />
          <input required placeholder="شماره تلفن" class="p-3 rounded border w-1/2" />
        </div>
        <div class="flex gap-2 mt-2">
          <button type="submit" class="px-4 py-3 rounded-full bg-rose-600 text-white">ثبت سفارش (نمونه)</button>
          <button type="button" id="cancelCheckout" class="px-4 py-3 rounded-full border">انصراف</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // داده‌های نمونه محصولات — بعدا می‌تونیم این رو از یک API بخونیم
    const products = [
      {id:1, title:'پیراهن آستین‌بلند ابریشمی', price:4200000, img:'https://images.unsplash.com/photo-1520975916137-1c72f4d2f4d6?auto=format&fit=crop&w=900&q=60', desc:'پارچهٔ ممتاز، دوخت دستی.'},
      {id:2, title:'مانتو کتان سفید', price:3500000, img:'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=900&q=60', desc:'کات کلاسیک، مناسب روزمره.'},
      {id:3, title:'شال دست‌دوز', price:1250000, img:'https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=900&q=60', desc:'رنگ‌های زنده و نقش‌دار.'},
      {id:4, title:'کت کشمیر', price:8900000, img:'https://images.unsplash.com/photo-1542060749-4b0ff3b8efc3?auto=format&fit=crop&w=900&q=60', desc:'نرمی و لوکس بودن.'},
      {id:5, title:'شلوار پارچه‌ای', price:2100000, img:'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=900&q=60', desc:'برش مُد روز.'},
      {id:6, title:'کفش دست‌دوز', price:6200000, img:'https://images.unsplash.com/photo-1528701800487-2762cdb6e3b3?auto=format&fit=crop&w=900&q=60', desc:'چرم طبیعی، دوام بالا.'}
    ];

    // DOM refs
    const productsEl = document.getElementById('products');
    const productModal = document.getElementById('productModal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalPrice = document.getElementById('modalPrice');
    const modalDesc = document.getElementById('modalDesc');
    const modalQty = document.getElementById('modalQty');
    const addToCartBtn = document.getElementById('addToCartBtn');
    const closeModal = document.getElementById('closeModal');

    const cartBtn = document.getElementById('cartBtn');
    const cartDrawer = document.getElementById('cartDrawer');
    const closeCart = document.getElementById('closeCart');
    const cartItemsEl = document.getElementById('cartItems');
    const cartCount = document.getElementById('cartCount');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');

    const checkoutModal = document.getElementById('checkoutModal');
    const cancelCheckout = document.getElementById('cancelCheckout');
    const checkoutForm = document.getElementById('checkoutForm');

    // cart state
    let cart = JSON.parse(localStorage.getItem('cart')||'[]');
    let currentProduct = null;

    function formatToman(n){
      return n.toLocaleString('fa-IR') + ' تومان';
    }

    function renderProducts(){
      productsEl.innerHTML = products.map(p=>`
        <article class="rounded-2xl overflow-hidden bg-white shadow">
          <div class="h-64 bg-slate-100 flex items-end p-4 cursor-pointer" data-id="${p.id}">
            <img src="${p.img}" alt="" class="absolute inset-0 w-full h-64 object-cover opacity-90">
            <div class="relative z-10 bg-white/80 rounded p-3">
              <h3 class="font-semibold">${p.title}</h3>
              <div class="text-rose-600 font-bold mt-1">${formatToman(p.price)}</div>
            </div>
          </div>
          <div class="p-4 flex justify-between items-center">
            <button data-id="${p.id}" class="text-sm underline viewBtn">مشاهده</button>
            <button data-id="${p.id}" class="px-3 py-2 rounded-full bg-rose-600 text-white addBtn">افزودن</button>
          </div>
        </article>
      `).join('');

      // attach listeners
      document.querySelectorAll('.viewBtn').forEach(b=>b.addEventListener('click', e=>{
        const id = +e.target.dataset.id; openModal(id);
      }));
      document.querySelectorAll('.addBtn').forEach(b=>b.addEventListener('click', e=>{
        const id = +e.target.dataset.id; addToCart(id,1);
      }));
      document.querySelectorAll('[data-id]').forEach(el=>{
        el.addEventListener('click', (e)=>{
          if(e.target.closest('article')) return; // avoid double
        })
      })
    }

    function openModal(id){
      const p = products.find(x=>x.id===id);
      currentProduct = p;
      modalImg.src = p.img;
      modalTitle.textContent = p.title;
      modalPrice.textContent = formatToman(p.price);
      modalDesc.textContent = p.desc;
      modalQty.value = 1;
      productModal.classList.remove('hidden');
      productModal.classList.add('flex');
    }
    closeModal.addEventListener('click', ()=>{ productModal.classList.add('hidden'); productModal.classList.remove('flex'); });

    function saveCart(){ localStorage.setItem('cart', JSON.stringify(cart)); renderCart(); }

    function addToCart(id, qty){
      const p = products.find(x=>x.id===id);
      const existing = cart.find(i=>i.id===id);
      if(existing){ existing.qty += qty; }
      else cart.push({id:p.id, title:p.title, price:p.price, img:p.img, qty:qty});
      saveCart();
      openCart();
    }

    addToCartBtn.addEventListener('click', ()=>{
      if(!currentProduct) return;
      const q = Math.max(1, +modalQty.value);
      addToCart(currentProduct.id, q);
      productModal.classList.add('hidden'); productModal.classList.remove('flex');
    });

    function renderCart(){
      cartItemsEl.innerHTML = cart.length ? cart.map(i=>`
        <div class="flex items-center gap-3 border-b py-3">
          <img src="${i.img}" class="w-16 h-16 object-cover rounded" />
          <div class="flex-1">
            <div class="font-semibold">${i.title}</div>
            <div class="text-sm text-slate-500">${formatToman(i.price)} × ${i.qty}</div>
          </div>
          <div class="text-right">
            <div class="font-bold">${formatToman(i.price*i.qty)}</div>
            <div class="mt-2 flex gap-2">
              <button data-id="${i.id}" class="text-sm decrease">-</button>
              <button data-id="${i.id}" class="text-sm increase">+</button>
              <button data-id="${i.id}" class="text-sm text-red-600 remove">حذف</button>
            </div>
          </div>
        </div>
      `).join('') : '<div class="text-slate-500">سبد خرید خالی است.</div>';

      // bind
      cartItemsEl.querySelectorAll('.increase').forEach(b=>b.addEventListener('click', e=>{ const id=+e.target.dataset.id; changeQty(id,1)}));
      cartItemsEl.querySelectorAll('.decrease').forEach(b=>b.addEventListener('click', e=>{ const id=+e.target.dataset.id; changeQty(id,-1)}));
      cartItemsEl.querySelectorAll('.remove').forEach(b=>b.addEventListener('click', e=>{ const id=+e.target.dataset.id; removeItem(id)}));

      const total = cart.reduce((s,i)=>s + i.price*i.qty, 0);
      cartTotal.textContent = formatToman(total);
      cartCount.textContent = cart.reduce((s,i)=>s + i.qty,0);
    }

    function changeQty(id, delta){
      const it = cart.find(i=>i.id===id); if(!it) return;
      it.qty += delta; if(it.qty<=0) cart = cart.filter(x=>x.id!==id);
      saveCart();
    }
    function removeItem(id){ cart = cart.filter(x=>x.id!==id); saveCart(); }

    // cart drawer
    function openCart(){ cartDrawer.style.transform = 'translateX(0)'; cartDrawer.classList.remove('translate-x-full'); }
    function closeCartFn(){ cartDrawer.style.transform = ''; cartDrawer.classList.add('translate-x-full'); }
    cartBtn.addEventListener('click', ()=>{ renderCart(); openCart(); });
    closeCart.addEventListener('click', ()=>{ closeCartFn(); });

    // checkout flow (mock)
    checkoutBtn.addEventListener('click', ()=>{ checkoutModal.classList.remove('hidden'); checkoutModal.classList.add('flex'); });
    cancelCheckout.addEventListener('click', ()=>{ checkoutModal.classList.add('hidden'); checkoutModal.classList.remove('flex'); });
    checkoutForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      // نمونهٔ ثبت سفارش: اینجا باید API یا درگاه پرداخت وصل شود.
      alert('سفارش با موفقیت ثبت شد — (نمونه)');
      cart = []; saveCart(); checkoutModal.classList.add('hidden'); checkoutModal.classList.remove('flex'); closeCartFn();
    });

    // initial
    renderProducts(); renderCart();

    // accessibility: click outside modals to close
    productModal.addEventListener('click', (e)=>{ if(e.target===productModal){ productModal.classList.add('hidden'); productModal.classList.remove('flex'); } });
    checkoutModal.addEventListener('click', (e)=>{ if(e.target===checkoutModal){ checkoutModal.classList.add('hidden'); checkoutModal.classList.remove('flex'); } });
  </script>
</body>
</html>
